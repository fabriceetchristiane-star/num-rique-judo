<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Informations ‚Äì Dojo Num√©rique</title>
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="styles/style.css">
  <!-- AJOUT : Script d'authentification -->
  <script src="auth.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      background: #f8f9fa;
      color: #333;
      padding: 0 1rem;
    }
    
    header {
      background: linear-gradient(135deg, #2c3e50, #3498db);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      border-radius: 0 0 15px 15px;
      margin-bottom: 2rem;
    }
    
    .section-title {
      font-size: 1.5rem;
      color: #2c3e50;
      margin: 2rem 0 1rem 0;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid #3498db;
    }
    
    .video-block {
      background: white;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 1.5rem;
    }
    
    .lien-bleu {
      display: inline-block;
      background: #3498db;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      text-decoration: none;
      margin: 0.5rem;
      transition: background 0.3s;
    }
    
    .lien-bleu:hover {
      background: #2980b9;
      text-decoration: none;
      color: white;
    }
    
    footer {
      text-align: center;
      margin-top: 4rem;
      padding: 2rem;
      background: #2c3e50;
      color: white;
      border-radius: 15px 15px 0 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>üì¢ Informations du Dojo</h1>
    <p>Agenda, stages, r√©sultats de comp√©titions et actualit√©s</p>
  </header>

  <section>
    <!-- Section Agenda -->
    <div class="section-title">üìÖ Agenda Visuel</div>
    <div class="video-block">
      <div id="contenu-agenda">
        <p><em>L'agenda sera affich√© ici une fois configur√© par les professeurs.</em></p>
      </div>
    </div>

    <!-- Section R√©sultats -->
    <div class="section-title">üèÜ R√©sultats Comp√©titions</div>
    <div class="video-block">
      <div id="contenu-resultats">
        <p><em>Les r√©sultats des comp√©titions seront affich√©s ici.</em></p>
      </div>
    </div>

    <!-- Section Actualit√©s -->
    <div class="section-title">üì∞ Derni√®res Actualit√©s</div>
    <div class="video-block">
      <div id="contenu-actualites">
        <p><em>Les actualit√©s du club seront affich√©es ici.</em></p>
      </div>
    </div>

    <!-- Section Contact -->
    <div class="section-title">üìû Contact & Informations Pratiques</div>
    <div class="video-block">
      <div id="contenu-contact">
        <p><em>Les informations de contact seront affich√©es ici.</em></p>
      </div>
    </div>

    <!-- Section PDF -->
    <div class="section-title">üìÑ Documents √† T√©l√©charger</div>
    <div class="video-block">
      <div id="contenu-pdf">
        <p><em>Les documents PDF seront list√©s ici.</em></p>
      </div>
    </div>
  </section>

  <nav style="text-align: center; margin-top: 30px;">
    <a class="lien-bleu" href="index.html">üè† Retour √† l'accueil</a>
    <!-- AJOUT : Bouton pour acc√©der √† l'espace professeurs -->
    <button class="lien-bleu" onclick="ouvrirModalProf()" style="border: none; cursor: pointer;">üë®‚Äçüè´ Espace Professeurs</button>
  </nav>

  <footer>
    <p>Version locale ‚Äì Dojo Num√©rique Lambersart ‚Äì Derni√®re mise √† jour : <span id="date-maj"></span></p>
  </footer>

  <!-- AJOUT : Modal pour la connexion professeurs -->
  <div id="modalProf" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content" style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 500px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.2);">
      <span class="close" onclick="fermerModalProf()" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
      <h2>üîê Acc√®s Professeurs</h2>
      <p style="color: #666; margin-bottom: 20px; text-align: center;">
        Espace r√©serv√© aux enseignants du club
      </p>
      
      <form id="loginForm">
        <div class="form-group" style="margin-bottom: 1rem;">
          <label for="password" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Mot de passe :</label>
          <input type="password" id="password" name="password" required 
                 placeholder="Entrez le mot de passe" autocomplete="current-password"
                 style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 1rem;">
        </div>
        
        <div id="errorMessage" class="error-message" style="display: none; color: #dc3545; background: #f8d7da; padding: 10px; border-radius: 5px; margin: 10px 0; text-align: center;">
          ‚ùå Mot de passe incorrect
        </div>
        
        <button type="submit" class="btn-connexion" style="width: 100%; padding: 12px; background: #3498db; color: white; border: none; border-radius: 5px; font-size: 1.1rem; cursor: pointer; font-weight: bold;">
          üîê Se connecter
        </button>
      </form>
      
      <p style="text-align: center; margin-top: 20px; font-size: 0.9em; color: #777;">
        Session valide 24h ‚Ä¢ D√©connexion automatique
      </p>
    </div>
  </div>

  <script>
    // Charger tous les contenus
    function chargerContenus() {
      // Agenda
      const agenda = localStorage.getItem('info-agenda');
      if (agenda && agenda.trim() !== '') {
        document.getElementById('contenu-agenda').innerHTML = agenda;
      }
      
      // R√©sultats
      const resultats = localStorage.getItem('info-resultats');
      if (resultats && resultats.trim() !== '') {
        document.getElementById('contenu-resultats').innerHTML = resultats;
      }
      
      // Actualit√©s
      const actualites = localStorage.getItem('info-actualites');
      if (actualites && actualites.trim() !== '') {
        document.getElementById('contenu-actualites').innerHTML = actualites;
      }
      
      // Contact
      const contact = localStorage.getItem('info-contact');
      if (contact && contact.trim() !== '') {
        document.getElementById('contenu-contact').innerHTML = contact;
      }
      
      // PDF
      afficherPDFsPublic();
      
      // Date de mise √† jour
      document.getElementById('date-maj').textContent = new Date().toLocaleDateString('fr-FR');
    }

    // Afficher les PDF pour le public
    function afficherPDFsPublic() {
      const pdfs = JSON.parse(localStorage.getItem('pdfs') || '[]');
      const contenuPDF = document.getElementById('contenu-pdf');
      
      if (pdfs.length === 0) {
        contenuPDF.innerHTML = '<p>Aucun document disponible pour le moment.</p>';
        return;
      }
      
      contenuPDF.innerHTML = '<p>T√©l√©chargez les documents du club :</p>' + 
        pdfs.map(pdf => `
          <div style="margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 6px;">
            <strong>${pdf.nom}</strong>
            <a href="${pdf.data}" download="${pdf.nom}.pdf" class="lien-bleu" style="margin-left: 1rem;">
              üì• T√©l√©charger
            </a>
            <br><small>Ajout√© le ${pdf.date}</small>
          </div>
        `).join('');
    }

    // ===== NOUVEAU SYST√àME D'AUTHENTIFICATION =====
    
    function ouvrirModalProf() {
        document.getElementById('modalProf').style.display = 'block';
        document.getElementById('password').focus();
        document.getElementById('errorMessage').style.display = 'none';
    }

    function fermerModalProf() {
        document.getElementById('modalProf').style.display = 'none';
        document.getElementById('password').value = '';
        document.getElementById('errorMessage').style.display = 'none';
    }

    // Gestion du formulaire de connexion
    document.addEventListener('DOMContentLoaded', function() {
        chargerContenus();
        
        // Initialiser le formulaire de connexion
        const loginForm = document.getElementById('loginForm');
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const password = document.getElementById('password').value;
                const errorMessage = document.getElementById('errorMessage');
                
                // Utiliser le nouveau syst√®me auth
                if (typeof auth !== 'undefined' && auth.verifyPassword(password)) {
                    auth.createSession();
                    window.location.href = 'admin.html';
                } else {
                    errorMessage.style.display = 'block';
                    document.getElementById('password').value = '';
                    document.getElementById('password').focus();
                    document.getElementById('password').style.borderColor = '#dc3545';
                    setTimeout(() => {
                        document.getElementById('password').style.borderColor = '#ddd';
                    }, 1000);
                }
            });
        }
    });

    // Fermer modal en cliquant dehors
    window.onclick = function(event) {
        const modal = document.getElementById('modalProf');
        if (event.target === modal) {
            fermerModalProf();
        }
    }

    // Fermer modal avec √âchap
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            fermerModalProf();
        }
    });
  </script>
</body>
</html>